{% extends 'common/master.html' %}
{% load static %}
{% block content %}

<div class="row m-5">
    <div class="container-fluid">
        <div class="row m-5">
            <form action="{% url 'security:reset-password' token %}" method="POST" onsubmit="return check();">
                {% csrf_token %}
                <input type="password" name="password" id="password" required placeholder="New Password">
                <input type="password" name="password1" id="password1" required placeholder="Confirm Password">
                <button type="submit">Submit</button>
            </form>
            Constraints:
            <input type="checkbox" id="eight" readonly><label for="eight">Password should be atleast 8 letters</label>
            <input type="checkbox" id="num" readonly><label for="num">Password should contain atleast 1 number</label>
            <input type="checkbox" id="match" readonly><label for="match">Passwords should match</label>
        </div>
    </div>
</div>
<script>
    let post = false;
    const check = () => post;
    $(function () {
        $('#password, #password1').keyup(function () {
            const pass = $('#password').val();
            const pass1 = $('#password1').val();
            $('#eight').prop('checked', pass.length >= 8);
            $('#num').prop('checked', /\d/.test(pass));
            $('#match').prop('checked', pass === pass1);
            if (pass.length < 8 || !(/\d/.test(pass)) || pass !== pass1) {
                post = false;
                return;
            }
            post = true;
            return;
        })
        console.log(check());
    })
</script>

{% endblock %}